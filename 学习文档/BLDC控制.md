# BLDC基础知识

### 概述

无刷直流电机（BLDC：Brushless Direct Current Motor），也被称为电子换向电机（ECM或EC电机）或同步直流电机，是一种使用直流电（DC）电源的同步电机。无刷直流电机实质上为采用直流电源输入，并用逆变器变为三相交流电源，带位置反馈的永磁同步电机。

### 线圈

<img src="D:\消息记录\1517752988\Image\SharePic\20241018195159.png" alt="20241018195159" style="zoom: 33%;" />

<img src="D:\消息记录\1517752988\Image\SharePic\20241018195640.png" alt="20241018195640" style="zoom:33%;" />

<img src="D:\消息记录\1517752988\Image\SharePic\20241018195735.png" alt="20241018195735" style="zoom: 33%;" />

上图为典型的12线圈定子，其中每一个相位对应4个定子，而转子则有14个，极对数为7，3508电机就是这种配置，当然u8电机的线圈和极对数都要更多

### 基础概念

#### 电角度和机械角度

**电角度**是指电机中三相电流的**相位变化**，用于描述每个电气周期内电流如何从正向变化到负向。它用来反映电流在一个电气周期中的位置，相位变化是按照正弦波进行的。在一个完整的电气周期内，电角度从**0度变化到360度**，并重复这个周期。

电流变化一个周期，由三相电生成的磁场合矢量也旋转一圈

机械角度就是人眼观察到转子转到了哪里

![img](https://file.elecfans.com/web2/M00/09/A2/poYBAGD2U9CAdKNiAABaN29j9Zc000.jpg)

<img src="https://file.elecfans.com/web2/M00/09/A6/pYYBAGD2U9iAGMu4AAD7Od-6OLE842.jpg" alt="img" style="zoom: 67%;" />

如上图所示为三极对转子产生的磁场

<img src="D:\消息记录\1517752988\Image\SharePic\20241019113603.png" alt="20241019113603" style="zoom:50%;" />

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/22501b25a57e30b8df7ff4c6f67a758a.gif#pic_center)

当电机极对数为1时，电机转一圈电流变化一个周期，即磁场合矢量变化多少度转子就变化多少度，当极对数为2时电机转一圈电流变化两个周期，即当磁场合矢量指向某处时只有最近的那个极对被吸过去，于是就有公式

电角度（磁场合矢量的方向）=机械角度×极对数

#### 电器频率与电角速度

描述的是三相电流的变化频率和其生成的旋转的磁场合矢量的转速，电角速度等于转子同步角速度乘极对数

#### 同步转速

<img src="D:\消息记录\1517752988\Image\SharePic\20241020204057.png" alt="20241020204057" style="zoom: 67%;" />

同步转速是指电动机在没有负载和损耗的情况下达到的理想转速，可以通过电器频率推导而来的，这很重要，因为以前我们控mg513,m3508，给一个指定的电流值或者占空比值我们都不知道他们理论空载可达的角速度是多少。但现在可以直接算出来

# FOC

![20241018202439](D:\消息记录\1517752988\Image\SharePic\20241018202439.png)

### 磁场的矢量控制

目标：通过定子线圈产生一个大小和方向都可控的磁场矢量，该矢量能够吸引转子以任意速度移动到任意位置。如果想让转子高速旋转，该矢量必须与转子垂直，也就是说要知道转子的实时位置进行闭环控制以达到最佳效果。

#### 克拉克变换

**克拉克变换**（Clarke Transform）是将**三相静止坐标系**（A-B-C坐标系）转换到**两相静止坐标系**（α-β坐标系）的数学变换。

要生成一个任意的向量，线性代数告诉我们只需要一对不互相平行的向量就行了，但是常见的无刷电机却是三相的，三个向量的线性组合去生成向量，这显然不好控制，所以需要一个变换将这三个向量投影到一组正交向量上去，通过这两个正交向量的线性组合就可以方便的生成任意向量。

<img src="D:\消息记录\1517752988\Image\SharePic\20241018230337.png" alt="20241018230337" style="zoom: 50%;" />

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/9772e398d9ff4d6d004480ff883121ea.gif#pic_center)

通过线性代数和基尔霍夫电路定律进行变换和化简，详细推导过程无需了解，下面直接给结论

<img src="D:\消息记录\1517752988\Image\SharePic\20241018230419.png" alt="20241018230419" style="zoom:50%;" />

<img src="D:\消息记录\1517752988\Image\SharePic\20241018230633.png" alt="20241018230633" style="zoom: 25%;" />

虽然克拉克变换已经将三相系统简化为二维系统，但克拉克变换后的 α-β 坐标系是**静止的坐标系**。在这个静止坐标系中，电流和磁场的矢量仍然是随时间动态变化的交流信号。即使在 α-β 坐标系下，我们仍然需要处理这些动态的交流信号，控制难度依然很大。

#### 帕克变换

在**帕克变换**中，**q-d坐标系**（也称为**dq坐标系**或**旋转坐标系**）是将三相静止坐标系（如ABC相）转换到与电机**转子磁场同步旋转**的坐标系。角度是由编码器测得的

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/30d7fcd9efe9b10e507ed4dab0e907cc.gif#pic_center)



<img src="D:\消息记录\1517752988\Image\SharePic\20241020210555.png" alt="20241020210555" style="zoom: 33%;" />

<img src="D:\消息记录\1517752988\Image\SharePic\20241020211656.png" alt="20241020211656" style="zoom: 67%;" />

电机的总电流可以分解为两个正交的分量：

**d轴电流 IdI_dId**：与转子磁场方向**对齐**，通常用于控制电机的**磁链**。

**q轴电流 IqI_qIq**：与转子磁场方向**垂直**，即**交轴**电流，主要用于产生**电机的转矩**。

- <img src="D:\消息记录\1517752988\Image\SharePic\20241020211900.png" alt="20241020211900" style="zoom: 67%;" />

在m3508的电机手册中就可以查到其转矩常数kt

d轴电流与电机磁链正相关，q轴电流与转矩正相关

发给m3508的转矩电流实际上就是q轴电流，经由强大的c620电调电流环可以确保实际在定子上通过的iq就是你发过去的iq，貌似还没看过哪个电机要控制d轴电流的

### FOC简单开环控制

W

### 电流环